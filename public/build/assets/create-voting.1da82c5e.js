import{v as f,c as h}from"./validation.6733fc46.js";const m=document.querySelector(".btn-create-voting");m.addEventListener("click",function(){const l=document.querySelector(".create-voting"),u=l.dataset.votingId,c=l.querySelectorAll("input[type='text']");if(f(c)){let i=[];const v=document.querySelector("#name").value,n=document.querySelectorAll(".choice");for(let e=0;e<n.length;e++){const t={id:n[e].dataset.questionId?n[e].dataset.questionId:null,challenger:n[e].querySelector("#challenger").value,desc:n[e].querySelector("#desc").value};i.push(t)}const s={name:v,choice:i};var o=document.createElement("p"),d=new bootstrap.Modal("#exampleModal");window.location.href.indexOf("edit")>-1?$.ajax({url:`/votings/${u}`,headers:{"X-CSRF-Token":$('meta[name="csrf-token"]').attr("content")},type:"PUT",typeData:"json",data:{voting:s},error:function(e){let t=e.responseJSON.errors,r=1;o.style.color="red";for(let a of Object.values(t))o.innerHTML+=r+") "+a+"<br>",r++},success:function(e){o.innerHTML=e.success}}):$.ajax({url:"/votings",headers:{"X-CSRF-Token":$('meta[name="csrf-token"]').attr("content")},method:"POST",typeData:"json",data:{voting:s},error:function(e){let t=e.responseJSON.errors,r=1;o.style.color="red";for(let a of Object.values(t))o.innerHTML+=r+") "+a+"<br>",r++},success:function(e){for(let t=0;t<c.length;t++)c[t].value="",c[t].classList.remove("is-valid");o.innerHTML=e.success}}),$("#exampleModal .modal-body").html(o),d.show()}});h();
